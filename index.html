<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DASS‑21 Self‑Assessment (Instant Scoring)</title>
  <style>
    :root{--bg:#0b1020;--card:#101733;--ink:#e9eefc;--muted:#aab3d5;--accent:#5aa6ff;--accent2:#8b5cf6;--danger:#ff6b6b;--ok:#10b981}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#0b1020,#0b0f1a 40%,#0b1020);color:var(--ink)}
    .wrap{max-width:980px;margin:32px auto;padding:24px}
    header{display:flex;flex-wrap:wrap;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:12px;background:radial-gradient(120% 120% at 20% 20%,#5aa6ff,transparent 40%),radial-gradient(120% 120% at 85% 20%,#8b5cf6,transparent 40%),#1b2450;border:1px solid #2a3570;box-shadow:0 8px 30px rgba(90,166,255,.25)}
    h1{font-size:clamp(20px,3vw,28px);margin:0}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:18px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:860px){.grid{grid-template-columns:1.5fr .9fr}}
    .q{padding:16px;border-radius:14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08)}
    .q h3{margin:0 0 10px;font-size:16px;line-height:1.4}
    .opts{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px}
    .opt{cursor:pointer;border-radius:12px;border:1px solid rgba(255,255,255,.12);padding:10px;text-align:center;background:rgba(255,255,255,.03)}
    input[type=radio]{display:none}
    input[type=radio]:checked + .opt{outline:2px solid var(--accent);border-color:transparent;background:linear-gradient(180deg,rgba(90,166,255,.18),rgba(255,255,255,.03))}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap}
    button{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
    .primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:white}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,.16);color:var(--ink)}
    .ok{background:rgba(16,185,129,.15);border:1px solid rgba(16,185,129,.35)}
    .warn{background:rgba(255,107,107,.12);border:1px solid rgba(255,107,107,.35)}
    .legend{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px;margin-top:8px}
    .chip{padding:6px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.15);font-size:12px;text-align:center;color:var(--muted)}
    .result h2{margin:0 0 6px}
    .scores{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    .score{padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.03)}
    .score .num{font-size:28px;font-weight:800}
    .sev{font-weight:700}
    .sev.normal{color:var(--ok)}
    .sev.mild{color:#f59e0b}
    .sev.moderate{color:#f97316}
    .sev.severe{color:#ef4444}
    .sev.extreme{color:#dc2626}
    .disclaimer{font-size:13px;line-height:1.45}
    footer{margin-top:24px;color:var(--muted);font-size:12px}
    .req{color:#ffd166;font-weight:600}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>DASS‑21 Self‑Assessment</h1>
          <div class="muted">English items • Instant scoring on your device (no data sent)</div>
        </div>
      </div>
      <div class="toolbar">
        <button class="ghost" id="btnPrint" title="Print or save as PDF">Print / PDF</button>
        <button class="ghost" id="btnReset" title="Clear all responses">Reset</button>
      </div>
    </header>

    <section class="card">
      <p class="muted" style="margin:0 0 8px">Instructions (past week): Choose a number 0–3 for each statement.
      </p>
      <div class="legend">
        <div class="chip"><strong>0</strong> Did not apply to me at all</div>
        <div class="chip"><strong>1</strong> Applied to me to some degree, or some of the time</div>
        <div class="chip"><strong>2</strong> Applied to me to a considerable degree, or a good part of the time</div>
        <div class="chip"><strong>3</strong> Applied to me very much, or most of the time</div>
      </div>
    </section>

    <main class="grid" style="margin-top:16px">
      <section class="card">
        <form id="dassForm">
          <div id="questions"></div>
          <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:12px">
            <button type="button" class="primary" id="btnScore">Calculate Scores</button>
            <span class="muted" id="progress">0/21 answered</span>
          </div>
          <p class="muted" style="margin-top:8px">Fields marked <span class="req">*</span> are required.</p>
        </form>
      </section>

      <aside class="card result" id="results" aria-live="polite" aria-atomic="true">
        <h2>Results</h2>
        <p class="muted" style="margin-top:0">Scores are doubled (×2) to align with standard DASS‑21 cut‑offs.</p>
        <div class="scores" id="scores">
          <div class="score" id="scoreDep">
            <div class="muted">Depression</div>
            <div class="num" data-num>0</div>
            <div class="sev normal" data-sev>Normal</div>
          </div>
          <div class="score" id="scoreAnx">
            <div class="muted">Anxiety</div>
            <div class="num" data-num>0</div>
            <div class="sev normal" data-sev>Normal</div>
          </div>
          <div class="score" id="scoreStr">
            <div class="muted">Stress</div>
            <div class="num" data-num>0</div>
            <div class="sev normal" data-sev>Normal</div>
          </div>
        </div>
        <div style="margin-top:12px">
          <button class="ok" id="btnCopy">Copy summary</button>
          <button class="ghost" id="btnClearResults">Clear</button>
        </div>
        <hr style="border:none;border-top:1px solid rgba(255,255,255,.12);margin:14px 0">
        <div class="disclaimer">
          <strong>Disclaimer:</strong> This tool is for screening/education, not a diagnosis. If your scores are Moderate or higher, consider consulting a qualified clinician. All calculations run locally in your browser.
        </div>
      </aside>
    </main>

    <footer>
      DASS‑21 items © P. F. Lovibond & S. H. Lovibond. Use the English wording for validity. Built as a static, client‑only page.
    </footer>
  </div>

<script>
  // --- DASS‑21 items (English wording) ---
  const items = [
    { id:1,  text:"I found it hard to wind down", domain:"Stress" },
    { id:2,  text:"I was aware of dryness of my mouth", domain:"Anxiety" },
    { id:3,  text:"I couldn't seem to experience any positive feeling at all", domain:"Depression" },
    { id:4,  text:"I experienced breathing difficulty (e.g., excessively rapid breathing, breathlessness in the absence of physical exertion)", domain:"Anxiety" },
    { id:5,  text:"I found it difficult to work up the initiative to do things", domain:"Depression" },
    { id:6,  text:"I tended to over-react to situations", domain:"Stress" },
    { id:7,  text:"I experienced trembling (e.g., in the hands)", domain:"Anxiety" },
    { id:8,  text:"I felt that I was using a lot of nervous energy", domain:"Stress" },
    { id:9,  text:"I was worried about situations in which I might panic and make a fool of myself", domain:"Anxiety" },
    { id:10, text:"I felt that I had nothing to look forward to", domain:"Depression" },
    { id:11, text:"I found myself getting agitated", domain:"Stress" },
    { id:12, text:"I found it difficult to relax", domain:"Stress" },
    { id:13, text:"I felt down-hearted and blue", domain:"Depression" },
    { id:14, text:"I was intolerant of anything that kept me from getting on with what I was doing", domain:"Stress" },
    { id:15, text:"I felt I was close to panic", domain:"Anxiety" },
    { id:16, text:"I was unable to become enthusiastic about anything", domain:"Depression" },
    { id:17, text:"I felt I wasn't worth much as a person", domain:"Depression" },
    { id:18, text:"I felt that I was rather touchy", domain:"Stress" },
    { id:19, text:"I was aware of the action of my heart in the absence of physical exertion (e.g., sense of heart rate increase, heart missing a beat)", domain:"Anxiety" },
    { id:20, text:"I felt scared without any good reason", domain:"Anxiety" },
    { id:21, text:"I felt that life was meaningless", domain:"Depression" }
  ];

  // Domain index sets (1‑based IDs)
  const dep = new Set([3,5,10,13,16,17,21]);
  const anx = new Set([2,4,7,9,15,19,20]);
  const str = new Set([1,6,8,11,12,14,18]);

  // Severity cut‑offs (DASS‑21 standard after ×2)
  const cut = {
    Depression: [ {max:9,  label:'Normal',   cls:'normal'},
                  {max:13, label:'Mild',     cls:'mild'},
                  {max:20, label:'Moderate', cls:'moderate'},
                  {max:27, label:'Severe',   cls:'severe'},
                  {max:99, label:'Extremely Severe', cls:'extreme'} ],
    Anxiety:    [ {max:7,  label:'Normal',   cls:'normal'},
                  {max:9,  label:'Mild',     cls:'mild'},
                  {max:14, label:'Moderate', cls:'moderate'},
                  {max:19, label:'Severe',   cls:'severe'},
                  {max:99, label:'Extremely Severe', cls:'extreme'} ],
    Stress:     [ {max:14, label:'Normal',   cls:'normal'},
                  {max:18, label:'Mild',     cls:'mild'},
                  {max:25, label:'Moderate', cls:'moderate'},
                  {max:33, label:'Severe',   cls:'severe'},
                  {max:99, label:'Extremely Severe', cls:'extreme'} ],
  };

  // Render questions
  const qsEl = document.getElementById('questions');
  items.forEach(({id,text,domain})=>{
    const block = document.createElement('div');
    block.className='q';
    block.innerHTML = `
      <h3>${id}. ${text} <span class="muted" style="font-weight:600">(${domain})</span> <span class="req">*</span></h3>
      <div class="opts" role="radiogroup" aria-label="Question ${id}">
        ${[0,1,2,3].map(v=>`
          <label>
            <input type="radio" name="q${id}" value="${v}" aria-label="${v}">
            <div class="opt"><strong>${v}</strong></div>
          </label>
        `).join('')}
      </div>`;
    qsEl.appendChild(block);
  });

  const form = document.getElementById('dassForm');
  const btnScore = document.getElementById('btnScore');
  const btnReset = document.getElementById('btnReset');
  const btnPrint = document.getElementById('btnPrint');
  const btnCopy = document.getElementById('btnCopy');
  const btnClearResults = document.getElementById('btnClearResults');
  const progress = document.getElementById('progress');

  function answeredCount(){
    let c=0; for(let i=1;i<=21;i++){ if(form.querySelector(`input[name=q${i}]:checked`)) c++; }
    return c;
  }
  function updateProgress(){ progress.textContent = `${answeredCount()}/21 answered`; }
  form.addEventListener('change', updateProgress);
  updateProgress();

  function calc(){
    // Validate
    let missing=[]; const vals={};
    for(let i=1;i<=21;i++){
      const sel = form.querySelector(`input[name=q${i}]:checked`);
      if(!sel) missing.push(i); else vals[i]=Number(sel.value);
    }
    if(missing.length){
      alert(`Please answer all questions. Missing: ${missing.join(', ')}`);
      return null;
    }
    let sDep=0,sAnx=0,sStr=0;
    for(let i=1;i<=21;i++){
      const v = vals[i];
      if(dep.has(i)) sDep+=v; else if(anx.has(i)) sAnx+=v; else if(str.has(i)) sStr+=v;
    }
    // Multiply by 2 (DASS‑21 convention)
    sDep*=2; sAnx*=2; sStr*=2;
    return {Depression:sDep, Anxiety:sAnx, Stress:sStr};
  }

  function classify(domain,score){
    for(const band of cut[domain]){ if(score<=band.max) return band; }
    return cut[domain][cut[domain].length-1];
  }

  function paint(scores){
    const nodes = {
      Depression: document.querySelector('#scoreDep'),
      Anxiety: document.querySelector('#scoreAnx'),
      Stress: document.querySelector('#scoreStr'),
    };
    for(const k of Object.keys(nodes)){
      const el = nodes[k];
      const num = el.querySelector('[data-num]');
      const sev = el.querySelector('[data-sev]');
      const band = classify(k, scores[k]);
      num.textContent = String(scores[k]);
      sev.textContent = band.label;
      sev.className = `sev ${band.cls}`;
    }
  }

  btnScore.addEventListener('click', ()=>{
    const scores = calc();
    if(!scores) return;
    paint(scores);
  });

  btnReset.addEventListener('click', ()=>{
    form.reset(); updateProgress();
    paint({Depression:0,Anxiety:0,Stress:0});
  });

  btnPrint.addEventListener('click', ()=>{ window.print(); });

  btnCopy.addEventListener('click', ()=>{
    const d = document.querySelector('#scoreDep [data-num]').textContent;
    const a = document.querySelector('#scoreAnx [data-num]').textContent;
    const s = document.querySelector('#scoreStr [data-num]').textContent;
    const ds = document.querySelector('#scoreDep [data-sev]').textContent;
    const as = document.querySelector('#scoreAnx [data-sev]').textContent;
    const ss = document.querySelector('#scoreStr [data-sev]').textContent;
    const txt = `DASS‑21 Summary\nDepression: ${d} (${ds})\nAnxiety: ${a} (${as})\nStress: ${s} (${ss})`;
    navigator.clipboard.writeText(txt).then(()=>{
      btnCopy.textContent='Copied!'; setTimeout(()=>btnCopy.textContent='Copy summary',1200);
    });
  });

  btnClearResults.addEventListener('click', ()=>{
    paint({Depression:0,Anxiety:0,Stress:0});
  });
</script>
</body>
</html>
